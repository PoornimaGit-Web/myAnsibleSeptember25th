---
- hosts: all
  become: yes
  gather_facts: yes
  tasks:
    - name: I want to execute direct linux command
      command: hostname -f
      register: myresult
     
    - name: I want to display first task result
      debug:
        msg: "{{myresult}}"
        
    - name: Display command output
      debug:
        msg: "Hostname: {{myresult.stdout}}"
        
    - name: Display any errors
      debug:
        msg: "Errors: {{myresult.stderr}}"
    
    - name: Install git package when hostname command succeeds
      apt:
        name: git
        state: present
        update_cache: yes
      when: myresult.stderr == ""
      
    - name: Install tree package when hostname command succeeds
      apt:
        name: tree
        state: present
        update_cache: yes
      when: myresult.stderr != ""